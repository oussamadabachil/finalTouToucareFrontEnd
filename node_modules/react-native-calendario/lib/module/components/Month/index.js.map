{"version":3,"names":["React","useCallback","useMemo","View","Text","Month","moment","isValidDate","getMonthNames","isSameDate","shouldRenderMonth","isMonthDrawn","styles","SHOULD_NOT_UPDATE","EmptyMonth","memo","props","content","height","justifyContent","alignItems","theme","emptyMonthContainerStyle","emptyMonthText","emptyMonthTextStyle","name","MonthTitle","monthTitleText","monthTitleTextStyle","month","year","minDate","maxDate","firstDayMonday","showMonthTitle","renderAllMonths","calculateMonthHeightDynamically","onMonthLayout","monthNames","locale","index","MONTH_NAMES","Array","isArray","length","monthName","isEmptyMonth","firstViewableIndex","viewableRangeOffset","lastViewableIndex","handleOnLayout","e","monthStyle","min","Date","toDate","undefined","max","disabledDays","disableOffsetDays","disableRange","startDate","endDate","markedDays","onPress","renderDayContent","showWeekdays","dayNames","prevProps","nextProps","currentMonth","firstMonthToRender","add","isSame","startDateChanged","endDateChanged"],"sources":["index.tsx"],"sourcesContent":["import React, { useCallback, useMemo } from 'react';\nimport { View, Text, LayoutChangeEvent } from 'react-native';\nimport { Month, MonthProps } from 'react-native-month';\nimport moment from 'moment';\nimport { isValidDate, getMonthNames, isSameDate } from '../../utils/date';\nimport { shouldRenderMonth, isMonthDrawn } from './utils';\nimport styles from './styles';\nimport { ThemeType } from '../../types';\n\ninterface EmptyMonthProps {\n  height: number;\n  name: string;\n  theme: ThemeType;\n}\n\nconst SHOULD_NOT_UPDATE = true;\n\nconst EmptyMonth = React.memo<EmptyMonthProps>(\n  (props: EmptyMonthProps) => {\n    const content = useMemo(\n      () => ({\n        height: props.height,\n        justifyContent: 'center' as const,\n        alignItems: 'center' as const,\n      }),\n      [props.height]\n    );\n    return (\n      <View style={[content, props.theme.emptyMonthContainerStyle]}>\n        <Text\n          style={[styles.emptyMonthText, props.theme.emptyMonthTextStyle]}\n          allowFontScaling={false}\n        >\n          {props.name}\n        </Text>\n      </View>\n    );\n  },\n  () => SHOULD_NOT_UPDATE\n);\n\ninterface MonthTitleProps {\n  name: string;\n  theme: ThemeType;\n}\n\nconst MonthTitle = React.memo<MonthTitleProps>(\n  (props: MonthTitleProps) => (\n    <Text\n      allowFontScaling={false}\n      style={[styles.monthTitleText, props.theme.monthTitleTextStyle]}\n    >\n      {props.name}\n    </Text>\n  ),\n  () => SHOULD_NOT_UPDATE\n);\n\ninterface Props extends MonthProps {\n  onMonthLayout: (weeks: number, e: LayoutChangeEvent) => void;\n  calculateMonthHeightDynamically?: boolean;\n  monthNames?: string[];\n  firstMonthToRender: Date;\n  firstViewableIndex: number;\n  lastViewableIndex: number;\n  viewableRangeOffset: number;\n  renderAllMonths?: boolean;\n  showMonthTitle: boolean;\n  firstDayMonday: boolean;\n  height: number;\n  index: number;\n}\n\nexport default React.memo<Props>(\n  (props: Props) => {\n    const {\n      month,\n      year,\n      minDate,\n      maxDate,\n      firstDayMonday,\n      showMonthTitle,\n      renderAllMonths,\n      calculateMonthHeightDynamically,\n      onMonthLayout,\n      monthNames,\n      theme = {},\n      height,\n      locale,\n      index,\n    } = props;\n\n    const MONTH_NAMES =\n      Array.isArray(monthNames) && monthNames.length === 12\n        ? monthNames\n        : getMonthNames(locale);\n    const monthName = `${MONTH_NAMES[month]} ${year}`;\n\n    const isEmptyMonth =\n      !renderAllMonths &&\n      !calculateMonthHeightDynamically &&\n      (index < props.firstViewableIndex - props.viewableRangeOffset ||\n        index > props.lastViewableIndex);\n\n    const handleOnLayout = useCallback(\n      (e: LayoutChangeEvent) => {\n        if (calculateMonthHeightDynamically) {\n          onMonthLayout(index, e);\n        }\n      },\n      [calculateMonthHeightDynamically, index, onMonthLayout]\n    );\n\n    const monthStyle = useMemo(\n      () => (calculateMonthHeightDynamically ? {} : { height }),\n      [calculateMonthHeightDynamically, height]\n    );\n\n    if (isEmptyMonth) {\n      return <EmptyMonth name={monthName} height={height} theme={theme} />;\n    }\n\n    const min =\n      minDate && isValidDate(new Date(minDate))\n        ? moment(minDate, 'YYYY-MM-DD').toDate()\n        : undefined;\n    const max =\n      maxDate && isValidDate(new Date(maxDate))\n        ? moment(maxDate, 'YYYY-MM-DD').toDate()\n        : undefined;\n\n    return (\n      <View style={monthStyle} onLayout={handleOnLayout}>\n        {showMonthTitle && <MonthTitle name={monthName} theme={theme} />}\n        <View>\n          <Month\n            month={month}\n            year={year}\n            disabledDays={props.disabledDays}\n            disableOffsetDays={props.disableOffsetDays}\n            disableRange={props.disableRange}\n            startDate={props.startDate}\n            endDate={props.endDate}\n            firstDayMonday={firstDayMonday}\n            locale={props.locale}\n            markedDays={props.markedDays}\n            maxDate={max}\n            minDate={min}\n            onPress={props.onPress}\n            renderDayContent={props.renderDayContent}\n            showWeekdays={props.showWeekdays}\n            theme={props.theme}\n            dayNames={props.dayNames}\n          />\n        </View>\n      </View>\n    );\n  },\n  (prevProps: Props, nextProps: Props) => {\n    if (prevProps.disableRange !== nextProps.disableRange) {\n      return false;\n    }\n\n    if (\n      (prevProps.index <\n        prevProps.firstViewableIndex - prevProps.viewableRangeOffset ||\n        prevProps.index > prevProps.lastViewableIndex) &&\n      nextProps.index >= nextProps.firstViewableIndex &&\n      nextProps.index <= nextProps.lastViewableIndex\n    ) {\n      return false;\n    }\n\n    if (\n      (!nextProps.dayNames || !nextProps.monthNames) &&\n      prevProps.locale !== nextProps.locale\n    ) {\n      return false;\n    }\n\n    const currentMonth = moment(nextProps.firstMonthToRender).add(\n      nextProps.index,\n      'months'\n    );\n\n    if (prevProps.disableRange === nextProps.disableRange) {\n      if (nextProps.disableRange) {\n        if (prevProps.startDate !== nextProps.startDate) {\n          if (\n            !prevProps.startDate &&\n            moment(nextProps.startDate).isSame(currentMonth, 'month')\n          ) {\n            return false;\n          }\n\n          if (\n            prevProps.startDate &&\n            (moment(prevProps.startDate).isSame(currentMonth, 'month') ||\n              moment(nextProps.startDate).isSame(currentMonth, 'month'))\n          ) {\n            return false;\n          }\n        }\n      } else {\n        const startDateChanged =\n          (prevProps.startDate instanceof Date &&\n            nextProps.startDate instanceof Date &&\n            !isSameDate(prevProps.startDate, nextProps.startDate)) ||\n          prevProps.startDate !== nextProps.startDate;\n        const endDateChanged =\n          (prevProps.endDate instanceof Date &&\n            nextProps.endDate instanceof Date &&\n            !isSameDate(prevProps.endDate, nextProps.endDate)) ||\n          prevProps.endDate !== nextProps.endDate;\n\n        if (startDateChanged || endDateChanged) {\n          if (\n            isMonthDrawn(\n              currentMonth.year(),\n              currentMonth.month(),\n              prevProps.startDate,\n              prevProps.endDate\n            ) !==\n              isMonthDrawn(\n                currentMonth.year(),\n                currentMonth.month(),\n                nextProps.startDate,\n                nextProps.endDate\n              ) ||\n            (prevProps.startDate instanceof Date &&\n              moment(prevProps.startDate).isSame(currentMonth, 'month') &&\n              (startDateChanged || endDateChanged)) ||\n            (nextProps.startDate instanceof Date &&\n              moment(nextProps.startDate).isSame(currentMonth, 'month') &&\n              startDateChanged) ||\n            (prevProps.endDate instanceof Date &&\n              moment(prevProps.endDate).isSame(currentMonth, 'month') &&\n              endDateChanged) ||\n            (nextProps.endDate instanceof Date &&\n              moment(nextProps.endDate).isSame(currentMonth, 'month') &&\n              endDateChanged)\n          ) {\n            return false;\n          }\n        }\n      }\n    } else {\n      return false;\n    }\n\n    if (\n      shouldRenderMonth(currentMonth, prevProps.minDate, nextProps.minDate) ||\n      shouldRenderMonth(currentMonth, prevProps.maxDate, nextProps.maxDate)\n    ) {\n      return false;\n    }\n\n    return true;\n  }\n);\n"],"mappings":"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"}